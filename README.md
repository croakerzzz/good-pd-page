# Good PD Page - Демо страница с формой обратного звонка

Демо-версия страницы для выдуманного бизнеса TechSolutions с формой обратного звонка. Данные сохраняются в Google Таблицы.

## Технологии

- Next.js 14 (App Router)
- TypeScript
- Google Sheets API
- CSS Modules

## Установка

1. Установите зависимости:
```bash
npm install
```

2. Настройте переменные окружения (см. раздел "Настройка Google Sheets API")

3. Запустите проект:
```bash
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

## Настройка Google Sheets API

### Шаг 1: Создание Google Cloud проекта и сервисного аккаунта

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. Перейдите в "APIs & Services" > "Library"
4. Найдите "Google Sheets API" и включите его
5. Перейдите в "APIs & Services" > "Credentials"
6. Нажмите "Create Credentials" > "Service Account"
7. Заполните данные сервисного аккаунта и создайте его
8. Перейдите в созданный сервисный аккаунт и откройте вкладку "Keys"
9. Нажмите "Add Key" > "Create new key" > выберите JSON формат
10. Скачайте JSON файл с ключами

### Шаг 2: Создание Google Таблицы

1. Создайте новую Google Таблицу
2. Назовите первый лист (например, "Лист1")
3. В первой строке добавьте заголовки: `Время`, `ФИО`, `Телефон`, `Email`
4. Скопируйте ID таблицы из URL (строка между `/d/` и `/edit`)
   Например: `https://docs.google.com/spreadsheets/d/ВАШ_ID_ТАБЛИЦЫ/edit`

### Шаг 3: Предоставление доступа сервисному аккаунту

1. Откройте JSON файл с ключами сервисного аккаунта
2. Найдите поле `client_email` (например, `your-service-account@project-id.iam.gserviceaccount.com`)
3. Откройте вашу Google Таблицу
4. Нажмите кнопку "Поделиться" (Share)
5. Вставьте email сервисного аккаунта и дайте ему права "Редактор" (Editor)
6. Нажмите "Отправить"

### Шаг 4: Настройка учетных данных

Есть два способа настроить учетные данные Google:

#### Вариант 1: Использование файла (рекомендуется)

1. Поместите JSON файл с ключами сервисного аккаунта в корень проекта
2. Назовите его `bad-pd-local-f0c62f8d6a8a.json` (или укажите другое имя в переменной окружения `GOOGLE_CREDENTIALS_FILE`)
3. Убедитесь, что файл добавлен в `.gitignore` (уже добавлен)
4. Создайте файл `.env.local` в корне проекта и добавьте только ID таблицы:

```env
GOOGLE_SPREADSHEET_ID=ваш_id_таблицы
```

#### Вариант 2: Использование переменной окружения

1. Создайте файл `.env.local` в корне проекта
2. Добавьте следующие переменные:

```env
GOOGLE_SERVICE_ACCOUNT_KEY='{"type":"service_account","project_id":"...","private_key_id":"...","private_key":"...","client_email":"...","client_id":"...","auth_uri":"...","token_uri":"...","auth_provider_x509_cert_url":"...","client_x509_cert_url":"..."}'
GOOGLE_SPREADSHEET_ID=ваш_id_таблицы
```

**Важно:** 
- При использовании переменной окружения вставьте весь JSON из скачанного файла в одну строку
- Убедитесь, что JSON правильно экранирован (кавычки внутри должны быть экранированы)
- Код автоматически проверяет сначала файл, затем переменную окружения

## Структура проекта

```
good-pd-page/
├── app/
│   ├── api/
│   │   └── submit/
│   │       └── route.ts      # API endpoint для сохранения данных
│   ├── globals.css           # Глобальные стили
│   ├── layout.tsx            # Layout компонент
│   └── page.tsx              # Главная страница с формой
├── .env.local                # Переменные окружения (не коммитится)
├── package.json
├── tsconfig.json
└── README.md
```

## Форма обратного звонка

Форма содержит следующие поля:
- **ФИО** (обязательное)
- **Телефон** (обязательное)
- **Email** (обязательное, с валидацией формата)

При успешной отправке данные сохраняются в Google Таблицу с временной меткой.

## Разработка

```bash
# Запуск dev сервера
npm run dev

# Сборка для production
npm run build

# Запуск production версии
npm start
```

## Примечания

- Убедитесь, что Google Sheets API включен в вашем Google Cloud проекте
- Сервисный аккаунт должен иметь доступ к таблице (права редактора)
- ID таблицы можно найти в URL Google Таблицы
- Название листа по умолчанию - "Лист1", при необходимости измените в `route.ts`

